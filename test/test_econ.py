from vficredit import Economy
import os
import numpy as np

def test_economy_init():
    econ_test =  Economy(name='test') 
    assert econ_test.alias == 'test'

def test_economy_str():
    econ_test =  Economy(name='test',beta=1)
    assert str(econ_test) == os.linesep.join(['Economy:test','beta:1'])
    
def test_asset_grid():
    econ_1 =  Economy(name='bk'
                  ,minA=-1
                  ,maxA=255
                  ,nA=200
                  ,nAneg=150)

    econ_1.asset_grid()    
    assert 0.000001 > max(np.abs(econ_1.a - np.array(
    [-1.00000000e+00, -9.93288591e-01, -9.86577181e-01, -9.79865772e-01,
       -9.73154362e-01, -9.66442953e-01, -9.59731544e-01, -9.53020134e-01,
       -9.46308725e-01, -9.39597315e-01, -9.32885906e-01, -9.26174497e-01,
       -9.19463087e-01, -9.12751678e-01, -9.06040268e-01, -8.99328859e-01,
       -8.92617450e-01, -8.85906040e-01, -8.79194631e-01, -8.72483221e-01,
       -8.65771812e-01, -8.59060403e-01, -8.52348993e-01, -8.45637584e-01,
       -8.38926174e-01, -8.32214765e-01, -8.25503356e-01, -8.18791946e-01,
       -8.12080537e-01, -8.05369128e-01, -7.98657718e-01, -7.91946309e-01,
       -7.85234899e-01, -7.78523490e-01, -7.71812081e-01, -7.65100671e-01,
       -7.58389262e-01, -7.51677852e-01, -7.44966443e-01, -7.38255034e-01,
       -7.31543624e-01, -7.24832215e-01, -7.18120805e-01, -7.11409396e-01,
       -7.04697987e-01, -6.97986577e-01, -6.91275168e-01, -6.84563758e-01,
       -6.77852349e-01, -6.71140940e-01, -6.64429530e-01, -6.57718121e-01,
       -6.51006711e-01, -6.44295302e-01, -6.37583893e-01, -6.30872483e-01,
       -6.24161074e-01, -6.17449664e-01, -6.10738255e-01, -6.04026846e-01,
       -5.97315436e-01, -5.90604027e-01, -5.83892617e-01, -5.77181208e-01,
       -5.70469799e-01, -5.63758389e-01, -5.57046980e-01, -5.50335570e-01,
       -5.43624161e-01, -5.36912752e-01, -5.30201342e-01, -5.23489933e-01,
       -5.16778523e-01, -5.10067114e-01, -5.03355705e-01, -4.96644295e-01,
       -4.89932886e-01, -4.83221477e-01, -4.76510067e-01, -4.69798658e-01,
       -4.63087248e-01, -4.56375839e-01, -4.49664430e-01, -4.42953020e-01,
       -4.36241611e-01, -4.29530201e-01, -4.22818792e-01, -4.16107383e-01,
       -4.09395973e-01, -4.02684564e-01, -3.95973154e-01, -3.89261745e-01,
       -3.82550336e-01, -3.75838926e-01, -3.69127517e-01, -3.62416107e-01,
       -3.55704698e-01, -3.48993289e-01, -3.42281879e-01, -3.35570470e-01,
       -3.28859060e-01, -3.22147651e-01, -3.15436242e-01, -3.08724832e-01,
       -3.02013423e-01, -2.95302013e-01, -2.88590604e-01, -2.81879195e-01,
       -2.75167785e-01, -2.68456376e-01, -2.61744966e-01, -2.55033557e-01,
       -2.48322148e-01, -2.41610738e-01, -2.34899329e-01, -2.28187919e-01,
       -2.21476510e-01, -2.14765101e-01, -2.08053691e-01, -2.01342282e-01,
       -1.94630872e-01, -1.87919463e-01, -1.81208054e-01, -1.74496644e-01,
       -1.67785235e-01, -1.61073826e-01, -1.54362416e-01, -1.47651007e-01,
       -1.40939597e-01, -1.34228188e-01, -1.27516779e-01, -1.20805369e-01,
       -1.14093960e-01, -1.07382550e-01, -1.00671141e-01, -9.39597315e-02,
       -8.72483221e-02, -8.05369128e-02, -7.38255034e-02, -6.71140940e-02,
       -6.04026846e-02, -5.36912752e-02, -4.69798658e-02, -4.02684564e-02,
       -3.35570470e-02, -2.68456376e-02, -2.01342282e-02, -1.34228188e-02,
       -6.71140940e-03,  0.00000000e+00,  6.71140940e-03,  5.21065607e+00,
        1.04146007e+01,  1.56185454e+01,  2.08224901e+01,  2.60264347e+01,
        3.12303794e+01,  3.64343241e+01,  4.16382687e+01,  4.68422134e+01,
        5.20461581e+01,  5.72501027e+01,  6.24540474e+01,  6.76579921e+01,
        7.28619367e+01,  7.80658814e+01,  8.32698261e+01,  8.84737707e+01,
        9.36777154e+01,  9.88816600e+01,  1.04085605e+02,  1.09289549e+02,
        1.14493494e+02,  1.19697439e+02,  1.24901383e+02,  1.30105328e+02,
        1.35309273e+02,  1.40513217e+02,  1.45717162e+02,  1.50921107e+02,
        1.56125051e+02,  1.61328996e+02,  1.66532941e+02,  1.71736885e+02,
        1.76940830e+02,  1.82144775e+02,  1.87348719e+02,  1.92552664e+02,
        1.97756609e+02,  2.02960553e+02,  2.08164498e+02,  2.13368443e+02,
        2.18572387e+02,  2.23776332e+02,  2.28980277e+02,  2.34184221e+02,
        2.39388166e+02,  2.44592111e+02,  2.49796055e+02,  2.55000000e+02])))
              
    econ_1.asset_grid(minA=-1
                  ,maxA=10
                  ,nA=12
                  ,nAneg=2) 
    assert 0.000001 > max(np.abs(econ_1.a - np.array([-1.,  0.,  1.,  2.,  3.,  4.,  5.,  6.,  7.,  8.,  9., 10.])))